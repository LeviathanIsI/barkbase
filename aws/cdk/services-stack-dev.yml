Resources:
  ServicesDbLayerF81A76E3:
    Type: AWS::Lambda::LayerVersion
    Properties:
      CompatibleRuntimes:
        - nodejs20.x
      Content:
        S3Bucket: cdk-hnb659fds-assets-211125574375-us-east-2
        S3Key: cd80d7eec0bdcdfed297fcc0df415841ca619a324ad1b2364553d35167c61edb.zip
      Description: Shared database utilities for BarkBase services
    Metadata:
      aws:cdk:path: Barkbase-ServicesStack-dev/ServicesDbLayer/Resource
      aws:asset:path: asset.cd80d7eec0bdcdfed297fcc0df415841ca619a324ad1b2364553d35167c61edb
      aws:asset:is-bundled: false
      aws:asset:property: Content
  ServicesAuthLayerE49C4FB3:
    Type: AWS::Lambda::LayerVersion
    Properties:
      CompatibleRuntimes:
        - nodejs20.x
      Content:
        S3Bucket: cdk-hnb659fds-assets-211125574375-us-east-2
        S3Key: 547565b50123d6f7127f2dc3e5b127c9d7c913050faddacc23a2edd70b9b0cb9.zip
      Description: Shared authentication utilities for BarkBase services
    Metadata:
      aws:cdk:path: Barkbase-ServicesStack-dev/ServicesAuthLayer/Resource
      aws:asset:path: asset.547565b50123d6f7127f2dc3e5b127c9d7c913050faddacc23a2edd70b9b0cb9
      aws:asset:is-bundled: false
      aws:asset:property: Content
  OperationsServiceFunctionServiceRole23B3ECA3:
    Type: AWS::IAM::Role
    Properties:
      AssumeRolePolicyDocument:
        Statement:
          - Action: sts:AssumeRole
            Effect: Allow
            Principal:
              Service: lambda.amazonaws.com
        Version: "2012-10-17"
      ManagedPolicyArns:
        - Fn::Join:
            - ""
            - - "arn:"
              - Ref: AWS::Partition
              - :iam::aws:policy/service-role/AWSLambdaBasicExecutionRole
        - Fn::Join:
            - ""
            - - "arn:"
              - Ref: AWS::Partition
              - :iam::aws:policy/service-role/AWSLambdaVPCAccessExecutionRole
      Tags:
        - Key: Stage
          Value: dev
    Metadata:
      aws:cdk:path: Barkbase-ServicesStack-dev/OperationsServiceFunction/ServiceRole/Resource
  OperationsServiceFunctionServiceRoleDefaultPolicy1064D86C:
    Type: AWS::IAM::Policy
    Properties:
      PolicyDocument:
        Statement:
          - Action:
              - secretsmanager:DescribeSecret
              - secretsmanager:GetSecretValue
            Effect: Allow
            Resource: arn:aws:secretsmanager:us-east-2:211125574375:secret:Barkbase-dev-db-credentials-??????
        Version: "2012-10-17"
      PolicyName: OperationsServiceFunctionServiceRoleDefaultPolicy1064D86C
      Roles:
        - Ref: OperationsServiceFunctionServiceRole23B3ECA3
    Metadata:
      aws:cdk:path: Barkbase-ServicesStack-dev/OperationsServiceFunction/ServiceRole/DefaultPolicy/Resource
  OperationsServiceFunction0603CF61:
    Type: AWS::Lambda::Function
    Properties:
      Code:
        S3Bucket: cdk-hnb659fds-assets-211125574375-us-east-2
        S3Key: af5380ed2ee631eb55ef900ddcfc086f1f831e556db4cd0b141850ce791b0d17.zip
      Environment:
        Variables:
          DB_HOST: barkbase-dev-public.ctuea6sg4d0d.us-east-2.rds.amazonaws.com
          DB_PORT: "5432"
          DB_NAME: barkbase
          DB_SECRET_ID: Barkbase-dev-db-credentials
          DB_SECRET_ARN: arn:aws:secretsmanager:us-east-2:211125574375:secret:Barkbase-dev-db-credentials
          ENVIRONMENT: dev
          STAGE: dev
          USER_POOL_ID: us-east-2_v94gByGOq
          CLIENT_ID: 2csen8hj7b53ec2q9bc0siubja
      Handler: index.handler
      Layers:
        - Ref: ServicesAuthLayerE49C4FB3
        - Ref: ServicesDbLayerF81A76E3
      Role:
        Fn::GetAtt:
          - OperationsServiceFunctionServiceRole23B3ECA3
          - Arn
      Runtime: nodejs20.x
      Tags:
        - Key: Stage
          Value: dev
      Timeout: 30
      VpcConfig:
        SecurityGroupIds:
          - Fn::ImportValue: Barkbase-NetworkStack-dev:ExportsOutputFnGetAttLambdaSecurityGroup0BD9FC99GroupId34A98CFB
        SubnetIds:
          - Fn::ImportValue: Barkbase-NetworkStack-dev:ExportsOutputRefBarkbaseVpcAppPrivateSubnet1SubnetC58751821BF72A5C
          - Fn::ImportValue: Barkbase-NetworkStack-dev:ExportsOutputRefBarkbaseVpcAppPrivateSubnet2SubnetA37871A414B2782C
    DependsOn:
      - OperationsServiceFunctionServiceRoleDefaultPolicy1064D86C
      - OperationsServiceFunctionServiceRole23B3ECA3
    Metadata:
      aws:cdk:path: Barkbase-ServicesStack-dev/OperationsServiceFunction/Resource
      aws:asset:path: asset.af5380ed2ee631eb55ef900ddcfc086f1f831e556db4cd0b141850ce791b0d17
      aws:asset:is-bundled: false
      aws:asset:property: Code
  OperationsServiceFunctionLogGroup22537BF2:
    Type: AWS::Logs::LogGroup
    Properties:
      LogGroupName:
        Fn::Join:
          - ""
          - - /aws/lambda/
            - Ref: OperationsServiceFunction0603CF61
      RetentionInDays: 731
      Tags:
        - Key: Stage
          Value: dev
    UpdateReplacePolicy: Retain
    DeletionPolicy: Retain
    Metadata:
      aws:cdk:path: Barkbase-ServicesStack-dev/OperationsServiceFunction/LogGroup/Resource
  EntityServiceFunctionServiceRole88EBE52C:
    Type: AWS::IAM::Role
    Properties:
      AssumeRolePolicyDocument:
        Statement:
          - Action: sts:AssumeRole
            Effect: Allow
            Principal:
              Service: lambda.amazonaws.com
        Version: "2012-10-17"
      ManagedPolicyArns:
        - Fn::Join:
            - ""
            - - "arn:"
              - Ref: AWS::Partition
              - :iam::aws:policy/service-role/AWSLambdaBasicExecutionRole
        - Fn::Join:
            - ""
            - - "arn:"
              - Ref: AWS::Partition
              - :iam::aws:policy/service-role/AWSLambdaVPCAccessExecutionRole
      Tags:
        - Key: Stage
          Value: dev
    Metadata:
      aws:cdk:path: Barkbase-ServicesStack-dev/EntityServiceFunction/ServiceRole/Resource
  EntityServiceFunctionServiceRoleDefaultPolicy60625496:
    Type: AWS::IAM::Policy
    Properties:
      PolicyDocument:
        Statement:
          - Action:
              - secretsmanager:DescribeSecret
              - secretsmanager:GetSecretValue
            Effect: Allow
            Resource: arn:aws:secretsmanager:us-east-2:211125574375:secret:Barkbase-dev-db-credentials-??????
        Version: "2012-10-17"
      PolicyName: EntityServiceFunctionServiceRoleDefaultPolicy60625496
      Roles:
        - Ref: EntityServiceFunctionServiceRole88EBE52C
    Metadata:
      aws:cdk:path: Barkbase-ServicesStack-dev/EntityServiceFunction/ServiceRole/DefaultPolicy/Resource
  EntityServiceFunction31C1524D:
    Type: AWS::Lambda::Function
    Properties:
      Code:
        S3Bucket: cdk-hnb659fds-assets-211125574375-us-east-2
        S3Key: 1c1206df42e1e81e3af472c59c7ac8a410255cb38d589d12b052470aa450ee36.zip
      Environment:
        Variables:
          DB_HOST: barkbase-dev-public.ctuea6sg4d0d.us-east-2.rds.amazonaws.com
          DB_PORT: "5432"
          DB_NAME: barkbase
          DB_SECRET_ID: Barkbase-dev-db-credentials
          DB_SECRET_ARN: arn:aws:secretsmanager:us-east-2:211125574375:secret:Barkbase-dev-db-credentials
          ENVIRONMENT: dev
          STAGE: dev
          USER_POOL_ID: us-east-2_v94gByGOq
          CLIENT_ID: 2csen8hj7b53ec2q9bc0siubja
      Handler: index.handler
      Layers:
        - Ref: ServicesAuthLayerE49C4FB3
        - Ref: ServicesDbLayerF81A76E3
      Role:
        Fn::GetAtt:
          - EntityServiceFunctionServiceRole88EBE52C
          - Arn
      Runtime: nodejs20.x
      Tags:
        - Key: Stage
          Value: dev
      Timeout: 30
      VpcConfig:
        SecurityGroupIds:
          - Fn::ImportValue: Barkbase-NetworkStack-dev:ExportsOutputFnGetAttLambdaSecurityGroup0BD9FC99GroupId34A98CFB
        SubnetIds:
          - Fn::ImportValue: Barkbase-NetworkStack-dev:ExportsOutputRefBarkbaseVpcAppPrivateSubnet1SubnetC58751821BF72A5C
          - Fn::ImportValue: Barkbase-NetworkStack-dev:ExportsOutputRefBarkbaseVpcAppPrivateSubnet2SubnetA37871A414B2782C
    DependsOn:
      - EntityServiceFunctionServiceRoleDefaultPolicy60625496
      - EntityServiceFunctionServiceRole88EBE52C
    Metadata:
      aws:cdk:path: Barkbase-ServicesStack-dev/EntityServiceFunction/Resource
      aws:asset:path: asset.1c1206df42e1e81e3af472c59c7ac8a410255cb38d589d12b052470aa450ee36
      aws:asset:is-bundled: false
      aws:asset:property: Code
  EntityServiceFunctionLogGroup8D5205F5:
    Type: AWS::Logs::LogGroup
    Properties:
      LogGroupName:
        Fn::Join:
          - ""
          - - /aws/lambda/
            - Ref: EntityServiceFunction31C1524D
      RetentionInDays: 731
      Tags:
        - Key: Stage
          Value: dev
    UpdateReplacePolicy: Retain
    DeletionPolicy: Retain
    Metadata:
      aws:cdk:path: Barkbase-ServicesStack-dev/EntityServiceFunction/LogGroup/Resource
  FeaturesServiceFunctionServiceRole2C751BDE:
    Type: AWS::IAM::Role
    Properties:
      AssumeRolePolicyDocument:
        Statement:
          - Action: sts:AssumeRole
            Effect: Allow
            Principal:
              Service: lambda.amazonaws.com
        Version: "2012-10-17"
      ManagedPolicyArns:
        - Fn::Join:
            - ""
            - - "arn:"
              - Ref: AWS::Partition
              - :iam::aws:policy/service-role/AWSLambdaBasicExecutionRole
        - Fn::Join:
            - ""
            - - "arn:"
              - Ref: AWS::Partition
              - :iam::aws:policy/service-role/AWSLambdaVPCAccessExecutionRole
      Tags:
        - Key: Stage
          Value: dev
    Metadata:
      aws:cdk:path: Barkbase-ServicesStack-dev/FeaturesServiceFunction/ServiceRole/Resource
  FeaturesServiceFunctionServiceRoleDefaultPolicyEE6A9C50:
    Type: AWS::IAM::Policy
    Properties:
      PolicyDocument:
        Statement:
          - Action:
              - secretsmanager:DescribeSecret
              - secretsmanager:GetSecretValue
            Effect: Allow
            Resource: arn:aws:secretsmanager:us-east-2:211125574375:secret:Barkbase-dev-db-credentials-??????
        Version: "2012-10-17"
      PolicyName: FeaturesServiceFunctionServiceRoleDefaultPolicyEE6A9C50
      Roles:
        - Ref: FeaturesServiceFunctionServiceRole2C751BDE
    Metadata:
      aws:cdk:path: Barkbase-ServicesStack-dev/FeaturesServiceFunction/ServiceRole/DefaultPolicy/Resource
  FeaturesServiceFunctionA6C57C51:
    Type: AWS::Lambda::Function
    Properties:
      Code:
        S3Bucket: cdk-hnb659fds-assets-211125574375-us-east-2
        S3Key: 36bb5586fa21e6f89594672165ed0a2515e8bc8b84aedc3c2c62eafc1aeb9adc.zip
      Environment:
        Variables:
          DB_HOST: barkbase-dev-public.ctuea6sg4d0d.us-east-2.rds.amazonaws.com
          DB_PORT: "5432"
          DB_NAME: barkbase
          DB_SECRET_ID: Barkbase-dev-db-credentials
          DB_SECRET_ARN: arn:aws:secretsmanager:us-east-2:211125574375:secret:Barkbase-dev-db-credentials
          ENVIRONMENT: dev
          STAGE: dev
          USER_POOL_ID: us-east-2_v94gByGOq
          CLIENT_ID: 2csen8hj7b53ec2q9bc0siubja
      Handler: index.handler
      Layers:
        - Ref: ServicesAuthLayerE49C4FB3
        - Ref: ServicesDbLayerF81A76E3
      Role:
        Fn::GetAtt:
          - FeaturesServiceFunctionServiceRole2C751BDE
          - Arn
      Runtime: nodejs20.x
      Tags:
        - Key: Stage
          Value: dev
      Timeout: 30
      VpcConfig:
        SecurityGroupIds:
          - Fn::ImportValue: Barkbase-NetworkStack-dev:ExportsOutputFnGetAttLambdaSecurityGroup0BD9FC99GroupId34A98CFB
        SubnetIds:
          - Fn::ImportValue: Barkbase-NetworkStack-dev:ExportsOutputRefBarkbaseVpcAppPrivateSubnet1SubnetC58751821BF72A5C
          - Fn::ImportValue: Barkbase-NetworkStack-dev:ExportsOutputRefBarkbaseVpcAppPrivateSubnet2SubnetA37871A414B2782C
    DependsOn:
      - FeaturesServiceFunctionServiceRoleDefaultPolicyEE6A9C50
      - FeaturesServiceFunctionServiceRole2C751BDE
    Metadata:
      aws:cdk:path: Barkbase-ServicesStack-dev/FeaturesServiceFunction/Resource
      aws:asset:path: asset.36bb5586fa21e6f89594672165ed0a2515e8bc8b84aedc3c2c62eafc1aeb9adc
      aws:asset:is-bundled: false
      aws:asset:property: Code
  FeaturesServiceFunctionLogGroup086E95B2:
    Type: AWS::Logs::LogGroup
    Properties:
      LogGroupName:
        Fn::Join:
          - ""
          - - /aws/lambda/
            - Ref: FeaturesServiceFunctionA6C57C51
      RetentionInDays: 731
      Tags:
        - Key: Stage
          Value: dev
    UpdateReplacePolicy: Retain
    DeletionPolicy: Retain
    Metadata:
      aws:cdk:path: Barkbase-ServicesStack-dev/FeaturesServiceFunction/LogGroup/Resource
  RolesConfigServiceFunctionServiceRole556265D4:
    Type: AWS::IAM::Role
    Properties:
      AssumeRolePolicyDocument:
        Statement:
          - Action: sts:AssumeRole
            Effect: Allow
            Principal:
              Service: lambda.amazonaws.com
        Version: "2012-10-17"
      ManagedPolicyArns:
        - Fn::Join:
            - ""
            - - "arn:"
              - Ref: AWS::Partition
              - :iam::aws:policy/service-role/AWSLambdaBasicExecutionRole
        - Fn::Join:
            - ""
            - - "arn:"
              - Ref: AWS::Partition
              - :iam::aws:policy/service-role/AWSLambdaVPCAccessExecutionRole
      Tags:
        - Key: Stage
          Value: dev
    Metadata:
      aws:cdk:path: Barkbase-ServicesStack-dev/RolesConfigServiceFunction/ServiceRole/Resource
  RolesConfigServiceFunctionServiceRoleDefaultPolicy7728CA57:
    Type: AWS::IAM::Policy
    Properties:
      PolicyDocument:
        Statement:
          - Action:
              - secretsmanager:DescribeSecret
              - secretsmanager:GetSecretValue
            Effect: Allow
            Resource: arn:aws:secretsmanager:us-east-2:211125574375:secret:Barkbase-dev-db-credentials-??????
        Version: "2012-10-17"
      PolicyName: RolesConfigServiceFunctionServiceRoleDefaultPolicy7728CA57
      Roles:
        - Ref: RolesConfigServiceFunctionServiceRole556265D4
    Metadata:
      aws:cdk:path: Barkbase-ServicesStack-dev/RolesConfigServiceFunction/ServiceRole/DefaultPolicy/Resource
  RolesConfigServiceFunction34B9994A:
    Type: AWS::Lambda::Function
    Properties:
      Code:
        S3Bucket: cdk-hnb659fds-assets-211125574375-us-east-2
        S3Key: 1ccb17d67dc140fdf708362b641e24acf4d83e23ebc62af99ca1e8db9c415761.zip
      Environment:
        Variables:
          DB_HOST: barkbase-dev-public.ctuea6sg4d0d.us-east-2.rds.amazonaws.com
          DB_PORT: "5432"
          DB_NAME: barkbase
          DB_SECRET_ID: Barkbase-dev-db-credentials
          DB_SECRET_ARN: arn:aws:secretsmanager:us-east-2:211125574375:secret:Barkbase-dev-db-credentials
          ENVIRONMENT: dev
          STAGE: dev
          USER_POOL_ID: us-east-2_v94gByGOq
          CLIENT_ID: 2csen8hj7b53ec2q9bc0siubja
      Handler: index.handler
      Layers:
        - Ref: ServicesAuthLayerE49C4FB3
        - Ref: ServicesDbLayerF81A76E3
      Role:
        Fn::GetAtt:
          - RolesConfigServiceFunctionServiceRole556265D4
          - Arn
      Runtime: nodejs20.x
      Tags:
        - Key: Stage
          Value: dev
      Timeout: 30
      VpcConfig:
        SecurityGroupIds:
          - Fn::ImportValue: Barkbase-NetworkStack-dev:ExportsOutputFnGetAttLambdaSecurityGroup0BD9FC99GroupId34A98CFB
        SubnetIds:
          - Fn::ImportValue: Barkbase-NetworkStack-dev:ExportsOutputRefBarkbaseVpcAppPrivateSubnet1SubnetC58751821BF72A5C
          - Fn::ImportValue: Barkbase-NetworkStack-dev:ExportsOutputRefBarkbaseVpcAppPrivateSubnet2SubnetA37871A414B2782C
    DependsOn:
      - RolesConfigServiceFunctionServiceRoleDefaultPolicy7728CA57
      - RolesConfigServiceFunctionServiceRole556265D4
    Metadata:
      aws:cdk:path: Barkbase-ServicesStack-dev/RolesConfigServiceFunction/Resource
      aws:asset:path: asset.1ccb17d67dc140fdf708362b641e24acf4d83e23ebc62af99ca1e8db9c415761
      aws:asset:is-bundled: false
      aws:asset:property: Code
  RolesConfigServiceFunctionLogGroup666442B3:
    Type: AWS::Logs::LogGroup
    Properties:
      LogGroupName:
        Fn::Join:
          - ""
          - - /aws/lambda/
            - Ref: RolesConfigServiceFunction34B9994A
      RetentionInDays: 731
      Tags:
        - Key: Stage
          Value: dev
    UpdateReplacePolicy: Retain
    DeletionPolicy: Retain
    Metadata:
      aws:cdk:path: Barkbase-ServicesStack-dev/RolesConfigServiceFunction/LogGroup/Resource
  TenantsMembershipsConfigServiceFunctionServiceRoleD7ECE58F:
    Type: AWS::IAM::Role
    Properties:
      AssumeRolePolicyDocument:
        Statement:
          - Action: sts:AssumeRole
            Effect: Allow
            Principal:
              Service: lambda.amazonaws.com
        Version: "2012-10-17"
      ManagedPolicyArns:
        - Fn::Join:
            - ""
            - - "arn:"
              - Ref: AWS::Partition
              - :iam::aws:policy/service-role/AWSLambdaBasicExecutionRole
        - Fn::Join:
            - ""
            - - "arn:"
              - Ref: AWS::Partition
              - :iam::aws:policy/service-role/AWSLambdaVPCAccessExecutionRole
      Tags:
        - Key: Stage
          Value: dev
    Metadata:
      aws:cdk:path: Barkbase-ServicesStack-dev/TenantsMembershipsConfigServiceFunction/ServiceRole/Resource
  TenantsMembershipsConfigServiceFunctionServiceRoleDefaultPolicy0E424810:
    Type: AWS::IAM::Policy
    Properties:
      PolicyDocument:
        Statement:
          - Action:
              - secretsmanager:DescribeSecret
              - secretsmanager:GetSecretValue
            Effect: Allow
            Resource: arn:aws:secretsmanager:us-east-2:211125574375:secret:Barkbase-dev-db-credentials-??????
        Version: "2012-10-17"
      PolicyName: TenantsMembershipsConfigServiceFunctionServiceRoleDefaultPolicy0E424810
      Roles:
        - Ref: TenantsMembershipsConfigServiceFunctionServiceRoleD7ECE58F
    Metadata:
      aws:cdk:path: Barkbase-ServicesStack-dev/TenantsMembershipsConfigServiceFunction/ServiceRole/DefaultPolicy/Resource
  TenantsMembershipsConfigServiceFunctionA6627078:
    Type: AWS::Lambda::Function
    Properties:
      Code:
        S3Bucket: cdk-hnb659fds-assets-211125574375-us-east-2
        S3Key: 1ccb17d67dc140fdf708362b641e24acf4d83e23ebc62af99ca1e8db9c415761.zip
      Environment:
        Variables:
          DB_HOST: barkbase-dev-public.ctuea6sg4d0d.us-east-2.rds.amazonaws.com
          DB_PORT: "5432"
          DB_NAME: barkbase
          DB_SECRET_ID: Barkbase-dev-db-credentials
          DB_SECRET_ARN: arn:aws:secretsmanager:us-east-2:211125574375:secret:Barkbase-dev-db-credentials
          ENVIRONMENT: dev
          STAGE: dev
          USER_POOL_ID: us-east-2_v94gByGOq
          CLIENT_ID: 2csen8hj7b53ec2q9bc0siubja
      Handler: index.handler
      Layers:
        - Ref: ServicesAuthLayerE49C4FB3
        - Ref: ServicesDbLayerF81A76E3
      Role:
        Fn::GetAtt:
          - TenantsMembershipsConfigServiceFunctionServiceRoleD7ECE58F
          - Arn
      Runtime: nodejs20.x
      Tags:
        - Key: Stage
          Value: dev
      Timeout: 30
      VpcConfig:
        SecurityGroupIds:
          - Fn::ImportValue: Barkbase-NetworkStack-dev:ExportsOutputFnGetAttLambdaSecurityGroup0BD9FC99GroupId34A98CFB
        SubnetIds:
          - Fn::ImportValue: Barkbase-NetworkStack-dev:ExportsOutputRefBarkbaseVpcAppPrivateSubnet1SubnetC58751821BF72A5C
          - Fn::ImportValue: Barkbase-NetworkStack-dev:ExportsOutputRefBarkbaseVpcAppPrivateSubnet2SubnetA37871A414B2782C
    DependsOn:
      - TenantsMembershipsConfigServiceFunctionServiceRoleDefaultPolicy0E424810
      - TenantsMembershipsConfigServiceFunctionServiceRoleD7ECE58F
    Metadata:
      aws:cdk:path: Barkbase-ServicesStack-dev/TenantsMembershipsConfigServiceFunction/Resource
      aws:asset:path: asset.1ccb17d67dc140fdf708362b641e24acf4d83e23ebc62af99ca1e8db9c415761
      aws:asset:is-bundled: false
      aws:asset:property: Code
  TenantsMembershipsConfigServiceFunctionLogGroup96FC8060:
    Type: AWS::Logs::LogGroup
    Properties:
      LogGroupName:
        Fn::Join:
          - ""
          - - /aws/lambda/
            - Ref: TenantsMembershipsConfigServiceFunctionA6627078
      RetentionInDays: 731
      Tags:
        - Key: Stage
          Value: dev
    UpdateReplacePolicy: Retain
    DeletionPolicy: Retain
    Metadata:
      aws:cdk:path: Barkbase-ServicesStack-dev/TenantsMembershipsConfigServiceFunction/LogGroup/Resource
  FacilityServicesConfigServiceFunctionServiceRoleA393AF0C:
    Type: AWS::IAM::Role
    Properties:
      AssumeRolePolicyDocument:
        Statement:
          - Action: sts:AssumeRole
            Effect: Allow
            Principal:
              Service: lambda.amazonaws.com
        Version: "2012-10-17"
      ManagedPolicyArns:
        - Fn::Join:
            - ""
            - - "arn:"
              - Ref: AWS::Partition
              - :iam::aws:policy/service-role/AWSLambdaBasicExecutionRole
        - Fn::Join:
            - ""
            - - "arn:"
              - Ref: AWS::Partition
              - :iam::aws:policy/service-role/AWSLambdaVPCAccessExecutionRole
      Tags:
        - Key: Stage
          Value: dev
    Metadata:
      aws:cdk:path: Barkbase-ServicesStack-dev/FacilityServicesConfigServiceFunction/ServiceRole/Resource
  FacilityServicesConfigServiceFunctionServiceRoleDefaultPolicy7EC13B68:
    Type: AWS::IAM::Policy
    Properties:
      PolicyDocument:
        Statement:
          - Action:
              - secretsmanager:DescribeSecret
              - secretsmanager:GetSecretValue
            Effect: Allow
            Resource: arn:aws:secretsmanager:us-east-2:211125574375:secret:Barkbase-dev-db-credentials-??????
        Version: "2012-10-17"
      PolicyName: FacilityServicesConfigServiceFunctionServiceRoleDefaultPolicy7EC13B68
      Roles:
        - Ref: FacilityServicesConfigServiceFunctionServiceRoleA393AF0C
    Metadata:
      aws:cdk:path: Barkbase-ServicesStack-dev/FacilityServicesConfigServiceFunction/ServiceRole/DefaultPolicy/Resource
  FacilityServicesConfigServiceFunction3CE03B41:
    Type: AWS::Lambda::Function
    Properties:
      Code:
        S3Bucket: cdk-hnb659fds-assets-211125574375-us-east-2
        S3Key: 1ccb17d67dc140fdf708362b641e24acf4d83e23ebc62af99ca1e8db9c415761.zip
      Environment:
        Variables:
          DB_HOST: barkbase-dev-public.ctuea6sg4d0d.us-east-2.rds.amazonaws.com
          DB_PORT: "5432"
          DB_NAME: barkbase
          DB_SECRET_ID: Barkbase-dev-db-credentials
          DB_SECRET_ARN: arn:aws:secretsmanager:us-east-2:211125574375:secret:Barkbase-dev-db-credentials
          ENVIRONMENT: dev
          STAGE: dev
          USER_POOL_ID: us-east-2_v94gByGOq
          CLIENT_ID: 2csen8hj7b53ec2q9bc0siubja
      Handler: index.handler
      Layers:
        - Ref: ServicesAuthLayerE49C4FB3
        - Ref: ServicesDbLayerF81A76E3
      Role:
        Fn::GetAtt:
          - FacilityServicesConfigServiceFunctionServiceRoleA393AF0C
          - Arn
      Runtime: nodejs20.x
      Tags:
        - Key: Stage
          Value: dev
      Timeout: 30
      VpcConfig:
        SecurityGroupIds:
          - Fn::ImportValue: Barkbase-NetworkStack-dev:ExportsOutputFnGetAttLambdaSecurityGroup0BD9FC99GroupId34A98CFB
        SubnetIds:
          - Fn::ImportValue: Barkbase-NetworkStack-dev:ExportsOutputRefBarkbaseVpcAppPrivateSubnet1SubnetC58751821BF72A5C
          - Fn::ImportValue: Barkbase-NetworkStack-dev:ExportsOutputRefBarkbaseVpcAppPrivateSubnet2SubnetA37871A414B2782C
    DependsOn:
      - FacilityServicesConfigServiceFunctionServiceRoleDefaultPolicy7EC13B68
      - FacilityServicesConfigServiceFunctionServiceRoleA393AF0C
    Metadata:
      aws:cdk:path: Barkbase-ServicesStack-dev/FacilityServicesConfigServiceFunction/Resource
      aws:asset:path: asset.1ccb17d67dc140fdf708362b641e24acf4d83e23ebc62af99ca1e8db9c415761
      aws:asset:is-bundled: false
      aws:asset:property: Code
  FacilityServicesConfigServiceFunctionLogGroup3139F23F:
    Type: AWS::Logs::LogGroup
    Properties:
      LogGroupName:
        Fn::Join:
          - ""
          - - /aws/lambda/
            - Ref: FacilityServicesConfigServiceFunction3CE03B41
      RetentionInDays: 731
      Tags:
        - Key: Stage
          Value: dev
    UpdateReplacePolicy: Retain
    DeletionPolicy: Retain
    Metadata:
      aws:cdk:path: Barkbase-ServicesStack-dev/FacilityServicesConfigServiceFunction/LogGroup/Resource
  UserProfileServiceFunctionServiceRoleBAD97454:
    Type: AWS::IAM::Role
    Properties:
      AssumeRolePolicyDocument:
        Statement:
          - Action: sts:AssumeRole
            Effect: Allow
            Principal:
              Service: lambda.amazonaws.com
        Version: "2012-10-17"
      ManagedPolicyArns:
        - Fn::Join:
            - ""
            - - "arn:"
              - Ref: AWS::Partition
              - :iam::aws:policy/service-role/AWSLambdaBasicExecutionRole
        - Fn::Join:
            - ""
            - - "arn:"
              - Ref: AWS::Partition
              - :iam::aws:policy/service-role/AWSLambdaVPCAccessExecutionRole
      Tags:
        - Key: Stage
          Value: dev
    Metadata:
      aws:cdk:path: Barkbase-ServicesStack-dev/UserProfileServiceFunction/ServiceRole/Resource
  UserProfileServiceFunctionServiceRoleDefaultPolicyBF6D9BAA:
    Type: AWS::IAM::Policy
    Properties:
      PolicyDocument:
        Statement:
          - Action:
              - secretsmanager:DescribeSecret
              - secretsmanager:GetSecretValue
            Effect: Allow
            Resource: arn:aws:secretsmanager:us-east-2:211125574375:secret:Barkbase-dev-db-credentials-??????
        Version: "2012-10-17"
      PolicyName: UserProfileServiceFunctionServiceRoleDefaultPolicyBF6D9BAA
      Roles:
        - Ref: UserProfileServiceFunctionServiceRoleBAD97454
    Metadata:
      aws:cdk:path: Barkbase-ServicesStack-dev/UserProfileServiceFunction/ServiceRole/DefaultPolicy/Resource
  UserProfileServiceFunction5A1818D5:
    Type: AWS::Lambda::Function
    Properties:
      Code:
        S3Bucket: cdk-hnb659fds-assets-211125574375-us-east-2
        S3Key: 2827999ddf1f48048fa0553b296572ad03bbaba9f5d7c0fde6f1f3cc8f894730.zip
      Environment:
        Variables:
          DB_HOST: barkbase-dev-public.ctuea6sg4d0d.us-east-2.rds.amazonaws.com
          DB_PORT: "5432"
          DB_NAME: barkbase
          DB_SECRET_ID: Barkbase-dev-db-credentials
          DB_SECRET_ARN: arn:aws:secretsmanager:us-east-2:211125574375:secret:Barkbase-dev-db-credentials
          ENVIRONMENT: dev
          STAGE: dev
      Handler: index.handler
      Layers:
        - Ref: ServicesDbLayerF81A76E3
      Role:
        Fn::GetAtt:
          - UserProfileServiceFunctionServiceRoleBAD97454
          - Arn
      Runtime: nodejs20.x
      Tags:
        - Key: Stage
          Value: dev
      Timeout: 30
      VpcConfig:
        SecurityGroupIds:
          - Fn::ImportValue: Barkbase-NetworkStack-dev:ExportsOutputFnGetAttLambdaSecurityGroup0BD9FC99GroupId34A98CFB
        SubnetIds:
          - Fn::ImportValue: Barkbase-NetworkStack-dev:ExportsOutputRefBarkbaseVpcAppPrivateSubnet1SubnetC58751821BF72A5C
          - Fn::ImportValue: Barkbase-NetworkStack-dev:ExportsOutputRefBarkbaseVpcAppPrivateSubnet2SubnetA37871A414B2782C
    DependsOn:
      - UserProfileServiceFunctionServiceRoleDefaultPolicyBF6D9BAA
      - UserProfileServiceFunctionServiceRoleBAD97454
    Metadata:
      aws:cdk:path: Barkbase-ServicesStack-dev/UserProfileServiceFunction/Resource
      aws:asset:path: asset.2827999ddf1f48048fa0553b296572ad03bbaba9f5d7c0fde6f1f3cc8f894730
      aws:asset:is-bundled: false
      aws:asset:property: Code
  UserProfileServiceFunctionLogGroup7BF83883:
    Type: AWS::Logs::LogGroup
    Properties:
      LogGroupName:
        Fn::Join:
          - ""
          - - /aws/lambda/
            - Ref: UserProfileServiceFunction5A1818D5
      RetentionInDays: 731
      Tags:
        - Key: Stage
          Value: dev
    UpdateReplacePolicy: Retain
    DeletionPolicy: Retain
    Metadata:
      aws:cdk:path: Barkbase-ServicesStack-dev/UserProfileServiceFunction/LogGroup/Resource
  PropertiesApiV2FunctionServiceRoleBA865FD3:
    Type: AWS::IAM::Role
    Properties:
      AssumeRolePolicyDocument:
        Statement:
          - Action: sts:AssumeRole
            Effect: Allow
            Principal:
              Service: lambda.amazonaws.com
        Version: "2012-10-17"
      ManagedPolicyArns:
        - Fn::Join:
            - ""
            - - "arn:"
              - Ref: AWS::Partition
              - :iam::aws:policy/service-role/AWSLambdaBasicExecutionRole
        - Fn::Join:
            - ""
            - - "arn:"
              - Ref: AWS::Partition
              - :iam::aws:policy/service-role/AWSLambdaVPCAccessExecutionRole
      Tags:
        - Key: Stage
          Value: dev
    Metadata:
      aws:cdk:path: Barkbase-ServicesStack-dev/PropertiesApiV2Function/ServiceRole/Resource
  PropertiesApiV2FunctionServiceRoleDefaultPolicy9076C88E:
    Type: AWS::IAM::Policy
    Properties:
      PolicyDocument:
        Statement:
          - Action:
              - secretsmanager:DescribeSecret
              - secretsmanager:GetSecretValue
            Effect: Allow
            Resource: arn:aws:secretsmanager:us-east-2:211125574375:secret:Barkbase-dev-db-credentials-??????
        Version: "2012-10-17"
      PolicyName: PropertiesApiV2FunctionServiceRoleDefaultPolicy9076C88E
      Roles:
        - Ref: PropertiesApiV2FunctionServiceRoleBA865FD3
    Metadata:
      aws:cdk:path: Barkbase-ServicesStack-dev/PropertiesApiV2Function/ServiceRole/DefaultPolicy/Resource
  PropertiesApiV2FunctionF2C6947F:
    Type: AWS::Lambda::Function
    Properties:
      Code:
        S3Bucket: cdk-hnb659fds-assets-211125574375-us-east-2
        S3Key: e941f3c37cb5cf26f288968e107d5edb698eec9944f4c3586b9721dfdc9ab05e.zip
      Environment:
        Variables:
          DB_HOST: barkbase-dev-public.ctuea6sg4d0d.us-east-2.rds.amazonaws.com
          DB_PORT: "5432"
          DB_NAME: barkbase
          DB_SECRET_ID: Barkbase-dev-db-credentials
          DB_SECRET_ARN: arn:aws:secretsmanager:us-east-2:211125574375:secret:Barkbase-dev-db-credentials
          ENVIRONMENT: dev
          STAGE: dev
      Handler: index.handler
      Layers:
        - Ref: ServicesDbLayerF81A76E3
      Role:
        Fn::GetAtt:
          - PropertiesApiV2FunctionServiceRoleBA865FD3
          - Arn
      Runtime: nodejs20.x
      Tags:
        - Key: Stage
          Value: dev
      Timeout: 30
      VpcConfig:
        SecurityGroupIds:
          - Fn::ImportValue: Barkbase-NetworkStack-dev:ExportsOutputFnGetAttLambdaSecurityGroup0BD9FC99GroupId34A98CFB
        SubnetIds:
          - Fn::ImportValue: Barkbase-NetworkStack-dev:ExportsOutputRefBarkbaseVpcAppPrivateSubnet1SubnetC58751821BF72A5C
          - Fn::ImportValue: Barkbase-NetworkStack-dev:ExportsOutputRefBarkbaseVpcAppPrivateSubnet2SubnetA37871A414B2782C
    DependsOn:
      - PropertiesApiV2FunctionServiceRoleDefaultPolicy9076C88E
      - PropertiesApiV2FunctionServiceRoleBA865FD3
    Metadata:
      aws:cdk:path: Barkbase-ServicesStack-dev/PropertiesApiV2Function/Resource
      aws:asset:path: asset.e941f3c37cb5cf26f288968e107d5edb698eec9944f4c3586b9721dfdc9ab05e
      aws:asset:is-bundled: false
      aws:asset:property: Code
  PropertiesApiV2FunctionLogGroupC020401B:
    Type: AWS::Logs::LogGroup
    Properties:
      LogGroupName:
        Fn::Join:
          - ""
          - - /aws/lambda/
            - Ref: PropertiesApiV2FunctionF2C6947F
      RetentionInDays: 731
      Tags:
        - Key: Stage
          Value: dev
    UpdateReplacePolicy: Retain
    DeletionPolicy: Retain
    Metadata:
      aws:cdk:path: Barkbase-ServicesStack-dev/PropertiesApiV2Function/LogGroup/Resource
  FinancialServiceFunctionServiceRoleEB670219:
    Type: AWS::IAM::Role
    Properties:
      AssumeRolePolicyDocument:
        Statement:
          - Action: sts:AssumeRole
            Effect: Allow
            Principal:
              Service: lambda.amazonaws.com
        Version: "2012-10-17"
      ManagedPolicyArns:
        - Fn::Join:
            - ""
            - - "arn:"
              - Ref: AWS::Partition
              - :iam::aws:policy/service-role/AWSLambdaBasicExecutionRole
        - Fn::Join:
            - ""
            - - "arn:"
              - Ref: AWS::Partition
              - :iam::aws:policy/service-role/AWSLambdaVPCAccessExecutionRole
      Tags:
        - Key: Stage
          Value: dev
    Metadata:
      aws:cdk:path: Barkbase-ServicesStack-dev/FinancialServiceFunction/ServiceRole/Resource
  FinancialServiceFunctionServiceRoleDefaultPolicy4AF08118:
    Type: AWS::IAM::Policy
    Properties:
      PolicyDocument:
        Statement:
          - Action:
              - secretsmanager:DescribeSecret
              - secretsmanager:GetSecretValue
            Effect: Allow
            Resource: arn:aws:secretsmanager:us-east-2:211125574375:secret:Barkbase-dev-db-credentials-??????
        Version: "2012-10-17"
      PolicyName: FinancialServiceFunctionServiceRoleDefaultPolicy4AF08118
      Roles:
        - Ref: FinancialServiceFunctionServiceRoleEB670219
    Metadata:
      aws:cdk:path: Barkbase-ServicesStack-dev/FinancialServiceFunction/ServiceRole/DefaultPolicy/Resource
  FinancialServiceFunction09E7DA47:
    Type: AWS::Lambda::Function
    Properties:
      Code:
        S3Bucket: cdk-hnb659fds-assets-211125574375-us-east-2
        S3Key: 8da9a53ba4f9ec6ff9d1870aa31d061cf6ce1e5705f691ad1de470b42567b31f.zip
      Environment:
        Variables:
          DB_HOST: barkbase-dev-public.ctuea6sg4d0d.us-east-2.rds.amazonaws.com
          DB_PORT: "5432"
          DB_NAME: barkbase
          DB_SECRET_ID: Barkbase-dev-db-credentials
          DB_SECRET_ARN: arn:aws:secretsmanager:us-east-2:211125574375:secret:Barkbase-dev-db-credentials
          ENVIRONMENT: dev
          STAGE: dev
          USER_POOL_ID: us-east-2_v94gByGOq
          CLIENT_ID: 2csen8hj7b53ec2q9bc0siubja
      Handler: index.handler
      Layers:
        - Ref: ServicesAuthLayerE49C4FB3
        - Ref: ServicesDbLayerF81A76E3
      Role:
        Fn::GetAtt:
          - FinancialServiceFunctionServiceRoleEB670219
          - Arn
      Runtime: nodejs20.x
      Tags:
        - Key: Stage
          Value: dev
      Timeout: 30
      VpcConfig:
        SecurityGroupIds:
          - Fn::ImportValue: Barkbase-NetworkStack-dev:ExportsOutputFnGetAttLambdaSecurityGroup0BD9FC99GroupId34A98CFB
        SubnetIds:
          - Fn::ImportValue: Barkbase-NetworkStack-dev:ExportsOutputRefBarkbaseVpcAppPrivateSubnet1SubnetC58751821BF72A5C
          - Fn::ImportValue: Barkbase-NetworkStack-dev:ExportsOutputRefBarkbaseVpcAppPrivateSubnet2SubnetA37871A414B2782C
    DependsOn:
      - FinancialServiceFunctionServiceRoleDefaultPolicy4AF08118
      - FinancialServiceFunctionServiceRoleEB670219
    Metadata:
      aws:cdk:path: Barkbase-ServicesStack-dev/FinancialServiceFunction/Resource
      aws:asset:path: asset.8da9a53ba4f9ec6ff9d1870aa31d061cf6ce1e5705f691ad1de470b42567b31f
      aws:asset:is-bundled: false
      aws:asset:property: Code
  FinancialServiceFunctionLogGroup592AB510:
    Type: AWS::Logs::LogGroup
    Properties:
      LogGroupName:
        Fn::Join:
          - ""
          - - /aws/lambda/
            - Ref: FinancialServiceFunction09E7DA47
      RetentionInDays: 731
      Tags:
        - Key: Stage
          Value: dev
    UpdateReplacePolicy: Retain
    DeletionPolicy: Retain
    Metadata:
      aws:cdk:path: Barkbase-ServicesStack-dev/FinancialServiceFunction/LogGroup/Resource
  AnalyticsServiceFunctionServiceRoleBB8B2FE5:
    Type: AWS::IAM::Role
    Properties:
      AssumeRolePolicyDocument:
        Statement:
          - Action: sts:AssumeRole
            Effect: Allow
            Principal:
              Service: lambda.amazonaws.com
        Version: "2012-10-17"
      ManagedPolicyArns:
        - Fn::Join:
            - ""
            - - "arn:"
              - Ref: AWS::Partition
              - :iam::aws:policy/service-role/AWSLambdaBasicExecutionRole
        - Fn::Join:
            - ""
            - - "arn:"
              - Ref: AWS::Partition
              - :iam::aws:policy/service-role/AWSLambdaVPCAccessExecutionRole
      Tags:
        - Key: Stage
          Value: dev
    Metadata:
      aws:cdk:path: Barkbase-ServicesStack-dev/AnalyticsServiceFunction/ServiceRole/Resource
  AnalyticsServiceFunctionServiceRoleDefaultPolicy9F427564:
    Type: AWS::IAM::Policy
    Properties:
      PolicyDocument:
        Statement:
          - Action:
              - secretsmanager:DescribeSecret
              - secretsmanager:GetSecretValue
            Effect: Allow
            Resource: arn:aws:secretsmanager:us-east-2:211125574375:secret:Barkbase-dev-db-credentials-??????
        Version: "2012-10-17"
      PolicyName: AnalyticsServiceFunctionServiceRoleDefaultPolicy9F427564
      Roles:
        - Ref: AnalyticsServiceFunctionServiceRoleBB8B2FE5
    Metadata:
      aws:cdk:path: Barkbase-ServicesStack-dev/AnalyticsServiceFunction/ServiceRole/DefaultPolicy/Resource
  AnalyticsServiceFunctionA7CDC68A:
    Type: AWS::Lambda::Function
    Properties:
      Code:
        S3Bucket: cdk-hnb659fds-assets-211125574375-us-east-2
        S3Key: 6b8c6d6dc191c6eabf585ace78a99bc8684eebaf1f36227d81adf21e05eff88b.zip
      Environment:
        Variables:
          DB_HOST: barkbase-dev-public.ctuea6sg4d0d.us-east-2.rds.amazonaws.com
          DB_PORT: "5432"
          DB_NAME: barkbase
          DB_SECRET_ID: Barkbase-dev-db-credentials
          DB_SECRET_ARN: arn:aws:secretsmanager:us-east-2:211125574375:secret:Barkbase-dev-db-credentials
          ENVIRONMENT: dev
          STAGE: dev
          USER_POOL_ID: us-east-2_v94gByGOq
          CLIENT_ID: 2csen8hj7b53ec2q9bc0siubja
      Handler: index.handler
      Layers:
        - Ref: ServicesAuthLayerE49C4FB3
        - Ref: ServicesDbLayerF81A76E3
      Role:
        Fn::GetAtt:
          - AnalyticsServiceFunctionServiceRoleBB8B2FE5
          - Arn
      Runtime: nodejs20.x
      Tags:
        - Key: Stage
          Value: dev
      Timeout: 30
      VpcConfig:
        SecurityGroupIds:
          - Fn::ImportValue: Barkbase-NetworkStack-dev:ExportsOutputFnGetAttLambdaSecurityGroup0BD9FC99GroupId34A98CFB
        SubnetIds:
          - Fn::ImportValue: Barkbase-NetworkStack-dev:ExportsOutputRefBarkbaseVpcAppPrivateSubnet1SubnetC58751821BF72A5C
          - Fn::ImportValue: Barkbase-NetworkStack-dev:ExportsOutputRefBarkbaseVpcAppPrivateSubnet2SubnetA37871A414B2782C
    DependsOn:
      - AnalyticsServiceFunctionServiceRoleDefaultPolicy9F427564
      - AnalyticsServiceFunctionServiceRoleBB8B2FE5
    Metadata:
      aws:cdk:path: Barkbase-ServicesStack-dev/AnalyticsServiceFunction/Resource
      aws:asset:path: asset.6b8c6d6dc191c6eabf585ace78a99bc8684eebaf1f36227d81adf21e05eff88b
      aws:asset:is-bundled: false
      aws:asset:property: Code
  AnalyticsServiceFunctionLogGroup90E5E30B:
    Type: AWS::Logs::LogGroup
    Properties:
      LogGroupName:
        Fn::Join:
          - ""
          - - /aws/lambda/
            - Ref: AnalyticsServiceFunctionA7CDC68A
      RetentionInDays: 731
      Tags:
        - Key: Stage
          Value: dev
    UpdateReplacePolicy: Retain
    DeletionPolicy: Retain
    Metadata:
      aws:cdk:path: Barkbase-ServicesStack-dev/AnalyticsServiceFunction/LogGroup/Resource
  AdminApiFunctionServiceRole8CB2DBB5:
    Type: AWS::IAM::Role
    Properties:
      AssumeRolePolicyDocument:
        Statement:
          - Action: sts:AssumeRole
            Effect: Allow
            Principal:
              Service: lambda.amazonaws.com
        Version: "2012-10-17"
      ManagedPolicyArns:
        - Fn::Join:
            - ""
            - - "arn:"
              - Ref: AWS::Partition
              - :iam::aws:policy/service-role/AWSLambdaBasicExecutionRole
        - Fn::Join:
            - ""
            - - "arn:"
              - Ref: AWS::Partition
              - :iam::aws:policy/service-role/AWSLambdaVPCAccessExecutionRole
      Tags:
        - Key: Stage
          Value: dev
    Metadata:
      aws:cdk:path: Barkbase-ServicesStack-dev/AdminApiFunction/ServiceRole/Resource
  AdminApiFunctionServiceRoleDefaultPolicy1CFB0CA4:
    Type: AWS::IAM::Policy
    Properties:
      PolicyDocument:
        Statement:
          - Action:
              - secretsmanager:DescribeSecret
              - secretsmanager:GetSecretValue
            Effect: Allow
            Resource: arn:aws:secretsmanager:us-east-2:211125574375:secret:Barkbase-dev-db-credentials-??????
        Version: "2012-10-17"
      PolicyName: AdminApiFunctionServiceRoleDefaultPolicy1CFB0CA4
      Roles:
        - Ref: AdminApiFunctionServiceRole8CB2DBB5
    Metadata:
      aws:cdk:path: Barkbase-ServicesStack-dev/AdminApiFunction/ServiceRole/DefaultPolicy/Resource
  AdminApiFunction0560532A:
    Type: AWS::Lambda::Function
    Properties:
      Code:
        S3Bucket: cdk-hnb659fds-assets-211125574375-us-east-2
        S3Key: c20e6a8337eed3722052d2302c9f2b2ee634493ca3b764a98940172577ddbf44.zip
      Environment:
        Variables:
          DB_HOST: barkbase-dev-public.ctuea6sg4d0d.us-east-2.rds.amazonaws.com
          DB_PORT: "5432"
          DB_NAME: barkbase
          DB_SECRET_ID: Barkbase-dev-db-credentials
          DB_SECRET_ARN: arn:aws:secretsmanager:us-east-2:211125574375:secret:Barkbase-dev-db-credentials
          ENVIRONMENT: dev
          STAGE: dev
      Handler: index.handler
      Layers:
        - Ref: ServicesDbLayerF81A76E3
      Role:
        Fn::GetAtt:
          - AdminApiFunctionServiceRole8CB2DBB5
          - Arn
      Runtime: nodejs20.x
      Tags:
        - Key: Stage
          Value: dev
      Timeout: 30
      VpcConfig:
        SecurityGroupIds:
          - Fn::ImportValue: Barkbase-NetworkStack-dev:ExportsOutputFnGetAttLambdaSecurityGroup0BD9FC99GroupId34A98CFB
        SubnetIds:
          - Fn::ImportValue: Barkbase-NetworkStack-dev:ExportsOutputRefBarkbaseVpcAppPrivateSubnet1SubnetC58751821BF72A5C
          - Fn::ImportValue: Barkbase-NetworkStack-dev:ExportsOutputRefBarkbaseVpcAppPrivateSubnet2SubnetA37871A414B2782C
    DependsOn:
      - AdminApiFunctionServiceRoleDefaultPolicy1CFB0CA4
      - AdminApiFunctionServiceRole8CB2DBB5
    Metadata:
      aws:cdk:path: Barkbase-ServicesStack-dev/AdminApiFunction/Resource
      aws:asset:path: asset.c20e6a8337eed3722052d2302c9f2b2ee634493ca3b764a98940172577ddbf44
      aws:asset:is-bundled: false
      aws:asset:property: Code
  AdminApiFunctionLogGroup2AB1FC0E:
    Type: AWS::Logs::LogGroup
    Properties:
      LogGroupName:
        Fn::Join:
          - ""
          - - /aws/lambda/
            - Ref: AdminApiFunction0560532A
      RetentionInDays: 731
      Tags:
        - Key: Stage
          Value: dev
    UpdateReplacePolicy: Retain
    DeletionPolicy: Retain
    Metadata:
      aws:cdk:path: Barkbase-ServicesStack-dev/AdminApiFunction/LogGroup/Resource
  GetUploadUrlFunctionServiceRole81C2384A:
    Type: AWS::IAM::Role
    Properties:
      AssumeRolePolicyDocument:
        Statement:
          - Action: sts:AssumeRole
            Effect: Allow
            Principal:
              Service: lambda.amazonaws.com
        Version: "2012-10-17"
      ManagedPolicyArns:
        - Fn::Join:
            - ""
            - - "arn:"
              - Ref: AWS::Partition
              - :iam::aws:policy/service-role/AWSLambdaBasicExecutionRole
        - Fn::Join:
            - ""
            - - "arn:"
              - Ref: AWS::Partition
              - :iam::aws:policy/service-role/AWSLambdaVPCAccessExecutionRole
      Tags:
        - Key: Stage
          Value: dev
    Metadata:
      aws:cdk:path: Barkbase-ServicesStack-dev/GetUploadUrlFunction/ServiceRole/Resource
  GetUploadUrlFunction24AFC12E:
    Type: AWS::Lambda::Function
    Properties:
      Code:
        S3Bucket: cdk-hnb659fds-assets-211125574375-us-east-2
        S3Key: 38a2b04b403878d3733884601eef1f43c8b5373d42b9a59e82592c26fa90d80d.zip
      Environment:
        Variables:
          S3_BUCKET: ""
          CLOUDFRONT_DOMAIN: ""
          S3_KMS_KEY_ID: ""
      Handler: index.handler
      Role:
        Fn::GetAtt:
          - GetUploadUrlFunctionServiceRole81C2384A
          - Arn
      Runtime: nodejs20.x
      Tags:
        - Key: Stage
          Value: dev
      Timeout: 30
      VpcConfig:
        SecurityGroupIds:
          - Fn::ImportValue: Barkbase-NetworkStack-dev:ExportsOutputFnGetAttLambdaSecurityGroup0BD9FC99GroupId34A98CFB
        SubnetIds:
          - Fn::ImportValue: Barkbase-NetworkStack-dev:ExportsOutputRefBarkbaseVpcAppPrivateSubnet1SubnetC58751821BF72A5C
          - Fn::ImportValue: Barkbase-NetworkStack-dev:ExportsOutputRefBarkbaseVpcAppPrivateSubnet2SubnetA37871A414B2782C
    DependsOn:
      - GetUploadUrlFunctionServiceRole81C2384A
    Metadata:
      aws:cdk:path: Barkbase-ServicesStack-dev/GetUploadUrlFunction/Resource
      aws:asset:path: asset.38a2b04b403878d3733884601eef1f43c8b5373d42b9a59e82592c26fa90d80d
      aws:asset:is-bundled: false
      aws:asset:property: Code
  GetUploadUrlFunctionLogGroup1541D3F4:
    Type: AWS::Logs::LogGroup
    Properties:
      LogGroupName:
        Fn::Join:
          - ""
          - - /aws/lambda/
            - Ref: GetUploadUrlFunction24AFC12E
      RetentionInDays: 731
      Tags:
        - Key: Stage
          Value: dev
    UpdateReplacePolicy: Retain
    DeletionPolicy: Retain
    Metadata:
      aws:cdk:path: Barkbase-ServicesStack-dev/GetUploadUrlFunction/LogGroup/Resource
  GetDownloadUrlFunctionServiceRoleE401904A:
    Type: AWS::IAM::Role
    Properties:
      AssumeRolePolicyDocument:
        Statement:
          - Action: sts:AssumeRole
            Effect: Allow
            Principal:
              Service: lambda.amazonaws.com
        Version: "2012-10-17"
      ManagedPolicyArns:
        - Fn::Join:
            - ""
            - - "arn:"
              - Ref: AWS::Partition
              - :iam::aws:policy/service-role/AWSLambdaBasicExecutionRole
        - Fn::Join:
            - ""
            - - "arn:"
              - Ref: AWS::Partition
              - :iam::aws:policy/service-role/AWSLambdaVPCAccessExecutionRole
      Tags:
        - Key: Stage
          Value: dev
    Metadata:
      aws:cdk:path: Barkbase-ServicesStack-dev/GetDownloadUrlFunction/ServiceRole/Resource
  GetDownloadUrlFunction7617431B:
    Type: AWS::Lambda::Function
    Properties:
      Code:
        S3Bucket: cdk-hnb659fds-assets-211125574375-us-east-2
        S3Key: 3b057428db5bc4859d4d8d50724124bca2d8da1e1f15b2d027d96630d2a76901.zip
      Environment:
        Variables:
          S3_BUCKET: ""
          CLOUDFRONT_DOMAIN: ""
          S3_KMS_KEY_ID: ""
      Handler: index.handler
      Role:
        Fn::GetAtt:
          - GetDownloadUrlFunctionServiceRoleE401904A
          - Arn
      Runtime: nodejs20.x
      Tags:
        - Key: Stage
          Value: dev
      Timeout: 30
      VpcConfig:
        SecurityGroupIds:
          - Fn::ImportValue: Barkbase-NetworkStack-dev:ExportsOutputFnGetAttLambdaSecurityGroup0BD9FC99GroupId34A98CFB
        SubnetIds:
          - Fn::ImportValue: Barkbase-NetworkStack-dev:ExportsOutputRefBarkbaseVpcAppPrivateSubnet1SubnetC58751821BF72A5C
          - Fn::ImportValue: Barkbase-NetworkStack-dev:ExportsOutputRefBarkbaseVpcAppPrivateSubnet2SubnetA37871A414B2782C
    DependsOn:
      - GetDownloadUrlFunctionServiceRoleE401904A
    Metadata:
      aws:cdk:path: Barkbase-ServicesStack-dev/GetDownloadUrlFunction/Resource
      aws:asset:path: asset.3b057428db5bc4859d4d8d50724124bca2d8da1e1f15b2d027d96630d2a76901
      aws:asset:is-bundled: false
      aws:asset:property: Code
  GetDownloadUrlFunctionLogGroupB6048893:
    Type: AWS::Logs::LogGroup
    Properties:
      LogGroupName:
        Fn::Join:
          - ""
          - - /aws/lambda/
            - Ref: GetDownloadUrlFunction7617431B
      RetentionInDays: 731
      Tags:
        - Key: Stage
          Value: dev
    UpdateReplacePolicy: Retain
    DeletionPolicy: Retain
    Metadata:
      aws:cdk:path: Barkbase-ServicesStack-dev/GetDownloadUrlFunction/LogGroup/Resource
  AuthApiFunctionServiceRole0519EC69:
    Type: AWS::IAM::Role
    Properties:
      AssumeRolePolicyDocument:
        Statement:
          - Action: sts:AssumeRole
            Effect: Allow
            Principal:
              Service: lambda.amazonaws.com
        Version: "2012-10-17"
      ManagedPolicyArns:
        - Fn::Join:
            - ""
            - - "arn:"
              - Ref: AWS::Partition
              - :iam::aws:policy/service-role/AWSLambdaBasicExecutionRole
        - Fn::Join:
            - ""
            - - "arn:"
              - Ref: AWS::Partition
              - :iam::aws:policy/service-role/AWSLambdaVPCAccessExecutionRole
      Tags:
        - Key: Stage
          Value: dev
    Metadata:
      aws:cdk:path: Barkbase-ServicesStack-dev/AuthApiFunction/ServiceRole/Resource
  AuthApiFunctionServiceRoleDefaultPolicy515EA49A:
    Type: AWS::IAM::Policy
    Properties:
      PolicyDocument:
        Statement:
          - Action:
              - secretsmanager:DescribeSecret
              - secretsmanager:GetSecretValue
            Effect: Allow
            Resource: arn:aws:secretsmanager:us-east-2:211125574375:secret:Barkbase-dev-db-credentials-??????
        Version: "2012-10-17"
      PolicyName: AuthApiFunctionServiceRoleDefaultPolicy515EA49A
      Roles:
        - Ref: AuthApiFunctionServiceRole0519EC69
    Metadata:
      aws:cdk:path: Barkbase-ServicesStack-dev/AuthApiFunction/ServiceRole/DefaultPolicy/Resource
  AuthApiFunction31FCF8B8:
    Type: AWS::Lambda::Function
    Properties:
      Code:
        S3Bucket: cdk-hnb659fds-assets-211125574375-us-east-2
        S3Key: 927b6a1e2c97df25458da4da398877583b223fd5b1fe13dce5f1b5b0ff3fd2fe.zip
      Environment:
        Variables:
          DB_HOST: barkbase-dev-public.ctuea6sg4d0d.us-east-2.rds.amazonaws.com
          DB_PORT: "5432"
          DB_NAME: barkbase
          DB_SECRET_ID: Barkbase-dev-db-credentials
          DB_SECRET_ARN: arn:aws:secretsmanager:us-east-2:211125574375:secret:Barkbase-dev-db-credentials
          ENVIRONMENT: dev
          STAGE: dev
          USER_POOL_ID: us-east-2_v94gByGOq
          CLIENT_ID: 2csen8hj7b53ec2q9bc0siubja
          JWT_SECRET: D0i1aPk8nr/DmDk4deO82X19VSEPWJL/6r2CVSOIMokJLb2/m4Q2xYFL8I3e9X9AtkI5X24hI5PdXb/kYoQRZA==
      Handler: index.handler
      Layers:
        - Ref: ServicesAuthLayerE49C4FB3
        - Ref: ServicesDbLayerF81A76E3
      Role:
        Fn::GetAtt:
          - AuthApiFunctionServiceRole0519EC69
          - Arn
      Runtime: nodejs20.x
      Tags:
        - Key: Stage
          Value: dev
      Timeout: 30
      VpcConfig:
        SecurityGroupIds:
          - Fn::ImportValue: Barkbase-NetworkStack-dev:ExportsOutputFnGetAttLambdaSecurityGroup0BD9FC99GroupId34A98CFB
        SubnetIds:
          - Fn::ImportValue: Barkbase-NetworkStack-dev:ExportsOutputRefBarkbaseVpcAppPrivateSubnet1SubnetC58751821BF72A5C
          - Fn::ImportValue: Barkbase-NetworkStack-dev:ExportsOutputRefBarkbaseVpcAppPrivateSubnet2SubnetA37871A414B2782C
    DependsOn:
      - AuthApiFunctionServiceRoleDefaultPolicy515EA49A
      - AuthApiFunctionServiceRole0519EC69
    Metadata:
      aws:cdk:path: Barkbase-ServicesStack-dev/AuthApiFunction/Resource
      aws:asset:path: asset.927b6a1e2c97df25458da4da398877583b223fd5b1fe13dce5f1b5b0ff3fd2fe
      aws:asset:is-bundled: false
      aws:asset:property: Code
  AuthApiFunctionLogGroup9FC07256:
    Type: AWS::Logs::LogGroup
    Properties:
      LogGroupName:
        Fn::Join:
          - ""
          - - /aws/lambda/
            - Ref: AuthApiFunction31FCF8B8
      RetentionInDays: 731
      Tags:
        - Key: Stage
          Value: dev
    UpdateReplacePolicy: Retain
    DeletionPolicy: Retain
    Metadata:
      aws:cdk:path: Barkbase-ServicesStack-dev/AuthApiFunction/LogGroup/Resource
  CDKMetadata:
    Type: AWS::CDK::Metadata
    Properties:
      Analytics: v2:deflate64:H4sIAAAAAAAA/+1aXWvbMBT9LdVjUbQ2ZTDylpRtDMIISdiLCUWR7lI1smQkOSUY//chW3azZRRWWorZfTCW79H9ODpYti8es/H1R3Z1wR/9SMj9SKstq1aBiz3lj/6u0jzfSs6qOT+C+wHOK2uyiggrgUzIJaFE2LzgQW01LEsTVA4+ARK8cKoIyprGUtMX+m3o7U9zWgD9UhoR2kpc65x877mRGlyfos+mo7snk6y5uiQbSsAclLMmBxPSpBjIlt3VoRBp5EGUToXjV2fLIgXZNBNW5dZA8GRSEd8M18ciplw4deABSB1Jcyk/n+bqa/jPwPmfGkQ76jcYEPUbNoj6DRtE/YYNon7DBl9LP9TuNRTA1R/i6uPe9f7a4bNneCA+e94bfOnuN/TlRpq4Fw4IPN8om/Zx1zGuqb+5495D8GwaT9TfsFkp9hBm3EO2oYrnrFpaDVlFuPdlDnJ2jMIUThmhCq6nQtiyF7udEx2m4qTXTXJu+A7kwmolVGxuZ9VvtuPUPfXF/w50nNZ20eVuZ8RgCQ2Bi/tvRisDPdYvx7MgckNuyA25ITfkhtyQG3J74oY1vJ3Gzft4rJm29uZNvXNY24icxTk3S7kKPED8CPBdSRgIA2Gg5wI1915729VU251n1dzumn5EVhGdht95aoTEMGg8Nbb/oiVzXdOmh7AKfKfMji7B29IJ6HoP/3psamqsBPbgPxzGY3b9iV1dPHilRqk5xdKfcr8As/+r+7UnAAA=
    Metadata:
      aws:cdk:path: Barkbase-ServicesStack-dev/CDKMetadata/Default
Outputs:
  ExportsOutputFnGetAttOperationsServiceFunction0603CF61Arn2B9DD38B:
    Value:
      Fn::GetAtt:
        - OperationsServiceFunction0603CF61
        - Arn
    Export:
      Name: Barkbase-ServicesStack-dev:ExportsOutputFnGetAttOperationsServiceFunction0603CF61Arn2B9DD38B
  ExportsOutputFnGetAttEntityServiceFunction31C1524DArnF75F98D8:
    Value:
      Fn::GetAtt:
        - EntityServiceFunction31C1524D
        - Arn
    Export:
      Name: Barkbase-ServicesStack-dev:ExportsOutputFnGetAttEntityServiceFunction31C1524DArnF75F98D8
  ExportsOutputFnGetAttFeaturesServiceFunctionA6C57C51Arn2D47EC9C:
    Value:
      Fn::GetAtt:
        - FeaturesServiceFunctionA6C57C51
        - Arn
    Export:
      Name: Barkbase-ServicesStack-dev:ExportsOutputFnGetAttFeaturesServiceFunctionA6C57C51Arn2D47EC9C
  ExportsOutputFnGetAttRolesConfigServiceFunction34B9994AArn1E6C2AA2:
    Value:
      Fn::GetAtt:
        - RolesConfigServiceFunction34B9994A
        - Arn
    Export:
      Name: Barkbase-ServicesStack-dev:ExportsOutputFnGetAttRolesConfigServiceFunction34B9994AArn1E6C2AA2
  ExportsOutputFnGetAttTenantsMembershipsConfigServiceFunctionA6627078Arn911C29E5:
    Value:
      Fn::GetAtt:
        - TenantsMembershipsConfigServiceFunctionA6627078
        - Arn
    Export:
      Name: Barkbase-ServicesStack-dev:ExportsOutputFnGetAttTenantsMembershipsConfigServiceFunctionA6627078Arn911C29E5
  ExportsOutputFnGetAttFacilityServicesConfigServiceFunction3CE03B41Arn2B51AD19:
    Value:
      Fn::GetAtt:
        - FacilityServicesConfigServiceFunction3CE03B41
        - Arn
    Export:
      Name: Barkbase-ServicesStack-dev:ExportsOutputFnGetAttFacilityServicesConfigServiceFunction3CE03B41Arn2B51AD19
  ExportsOutputFnGetAttUserProfileServiceFunction5A1818D5ArnDA4E7A0F:
    Value:
      Fn::GetAtt:
        - UserProfileServiceFunction5A1818D5
        - Arn
    Export:
      Name: Barkbase-ServicesStack-dev:ExportsOutputFnGetAttUserProfileServiceFunction5A1818D5ArnDA4E7A0F
  ExportsOutputFnGetAttPropertiesApiV2FunctionF2C6947FArnFCE15633:
    Value:
      Fn::GetAtt:
        - PropertiesApiV2FunctionF2C6947F
        - Arn
    Export:
      Name: Barkbase-ServicesStack-dev:ExportsOutputFnGetAttPropertiesApiV2FunctionF2C6947FArnFCE15633
  ExportsOutputFnGetAttFinancialServiceFunction09E7DA47ArnAC7B7E88:
    Value:
      Fn::GetAtt:
        - FinancialServiceFunction09E7DA47
        - Arn
    Export:
      Name: Barkbase-ServicesStack-dev:ExportsOutputFnGetAttFinancialServiceFunction09E7DA47ArnAC7B7E88
  ExportsOutputFnGetAttAnalyticsServiceFunctionA7CDC68AArnF2E72E38:
    Value:
      Fn::GetAtt:
        - AnalyticsServiceFunctionA7CDC68A
        - Arn
    Export:
      Name: Barkbase-ServicesStack-dev:ExportsOutputFnGetAttAnalyticsServiceFunctionA7CDC68AArnF2E72E38
  ExportsOutputFnGetAttAdminApiFunction0560532AArnB6598925:
    Value:
      Fn::GetAtt:
        - AdminApiFunction0560532A
        - Arn
    Export:
      Name: Barkbase-ServicesStack-dev:ExportsOutputFnGetAttAdminApiFunction0560532AArnB6598925
  ExportsOutputFnGetAttGetUploadUrlFunction24AFC12EArnE286DDE0:
    Value:
      Fn::GetAtt:
        - GetUploadUrlFunction24AFC12E
        - Arn
    Export:
      Name: Barkbase-ServicesStack-dev:ExportsOutputFnGetAttGetUploadUrlFunction24AFC12EArnE286DDE0
  ExportsOutputFnGetAttGetDownloadUrlFunction7617431BArn7E4E7ECB:
    Value:
      Fn::GetAtt:
        - GetDownloadUrlFunction7617431B
        - Arn
    Export:
      Name: Barkbase-ServicesStack-dev:ExportsOutputFnGetAttGetDownloadUrlFunction7617431BArn7E4E7ECB
  ExportsOutputFnGetAttAuthApiFunction31FCF8B8ArnAEE430B2:
    Value:
      Fn::GetAtt:
        - AuthApiFunction31FCF8B8
        - Arn
    Export:
      Name: Barkbase-ServicesStack-dev:ExportsOutputFnGetAttAuthApiFunction31FCF8B8ArnAEE430B2
Parameters:
  BootstrapVersion:
    Type: AWS::SSM::Parameter::Value<String>
    Default: /cdk-bootstrap/hnb659fds/version
    Description: Version of the CDK Bootstrap resources in this environment, automatically retrieved from SSM Parameter Store. [cdk:skip]

