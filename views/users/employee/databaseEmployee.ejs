<%- include("../../partials/header.ejs") %>
    <%- include("../../partials/employeeNav.ejs") %>

        <div class="container mt-5">
            <h2 class="mb-4 text-center">Guest Database</h2>
            <div class="mb-3">
                <input type="text" class="form-control" id="searchBox" placeholder="Search for a guest..."
                    onkeyup="searchFunction()">
            </div>
            <div class="table-responsive">
                <table class="table">
                    <thead class="thead-light">
                        <tr>
                            <th scope="col">#</th>
                            <th scope="col">First Name</th>
                            <th scope="col">Last Name</th>
                            <th scope="col">Email</th>
                            <th scope="col">Registered Pets</th>
                        </tr>
                    </thead>
                    <tbody id="guestList">
                        <% guests.forEach(function(guest, index) { %>
                            <tr>
                                <th scope="row">
                                    <%= index + 1 %>
                                </th>
                                <td>
                                    <%= guest.firstName %>
                                </td>
                                <td>
                                    <%= guest.lastName %>
                                </td>
                                <td>
                                    <%= guest.email %>
                                </td>
                                <td>
                                    <%= guest.pets.length %>
                                </td>
                                <!-- Add more data cells as needed -->
                            </tr>
                            <% }); %>
                    </tbody>
                </table>
            </div>
        </div>

        <% include("../../partials/footer.ejs") %>

            <script>
                function searchFunction() {
                    var input, filter, table, tr, td, i, txtValue;
                    input = document.getElementById("searchBox");
                    filter = input.value.toUpperCase();
                    table = document.getElementById("guestList");
                    tr = table.getElementsByTagName("tr");

                    for (i = 0; i < tr.length; i++) {
                        td = tr[i].getElementsByTagName("td")[0]; // Adjust the index based on which column you want to search
                        if (td) {
                            txtValue = td.textContent || td.innerText;
                            if (txtValue.toUpperCase().indexOf(filter) > -1) {
                                tr[i].style.display = "";
                            } else {
                                tr[i].style.display = "none";
                            }
                        }
                    }
                }
            </script>